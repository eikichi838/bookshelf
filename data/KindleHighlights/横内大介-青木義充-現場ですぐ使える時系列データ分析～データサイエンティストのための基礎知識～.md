---
kindle-sync:
  bookId: '63570'
  title: 現場ですぐ使える時系列データ分析～データサイエンティストのための基礎知識～
  author: 横内大介 and 青木義充
  asin: B00KNRL068
  lastAnnotatedDate: Invalid date
  bookImageUrl: 'https://m.media-amazon.com/images/I/71Y81KnnE-L._SY160.jpg'
  highlightsCount: 40
---
# 現場ですぐ使える時系列データ分析～データサイエンティストのための基礎知識～
## Metadata
* Author: [横内大介 and 青木義充](https://www.amazon.comundefined)
* ASIN: B00KNRL068
* Reference: https://www.amazon.com/dp/B00KNRL068
* [Kindle link](kindle://book?action=open&asin=B00KNRL068)

## Highlights
収益率データの分布の形状が正規分布に似ているという点 — location: [198](kindle://book?action=open&asin=B00KNRL068&location=198) ^ref-58039

---
前日が正の収益率であれば次の日も正の収益率が出やすいという依存構造が存在するという見方も可能でしょ — location: [241](kindle://book?action=open&asin=B00KNRL068&location=241) ^ref-40997

---
ペア — location: [303](kindle://book?action=open&asin=B00KNRL068&location=303) ^ref-42507

---
本書では対数差収益率を採用します。 t 時点の株価を Pt としたときに、 t 時点の対数差収益率 rt は、 rt ＝logPt－logPt－1 — location: [466](kindle://book?action=open&asin=B00KNRL068&location=466) ^ref-3724

---
具体的には、 n 個の収益率データ{ r 1, r 2, …, rn}が得られている場合に、ボラティリティを で定義します。この定義は収益率のヒストリカルデータを用いているため、 ヒストリカルボラティリティ と呼ばれることがあります。 — location: [550](kindle://book?action=open&asin=B00KNRL068&location=550) ^ref-29310

---
散布図行列 — location: [635](kindle://book?action=open&asin=B00KNRL068&location=635) ^ref-58516

---
「収益率が同じような値を続けてとるような状況」（※） — location: [776](kindle://book?action=open&asin=B00KNRL068&location=776) ^ref-43723

---
時系列プロットの観察からは、銘柄XとYでは、異なる性質をもつと読み取れました。特に、価格変動に関しては銘柄Xのほうが大きいと考えられましたが、収益率の平均、標準偏差、ヒストグラムの形状は銘柄間で差がありません。 — location: [822](kindle://book?action=open&asin=B00KNRL068&location=822) ^ref-53628

---
時点の収益率を rt としたときに、縦軸に rt、横軸に rt－1 とした散布図（縦軸に比べて横軸の収益率を1時点前に設定する）を描きましょう。Rでの入力方法は次の通りになります。 — location: [840](kindle://book?action=open&asin=B00KNRL068&location=840) ^ref-43815

---
自己相関関係」 — location: [855](kindle://book?action=open&asin=B00KNRL068&location=855) ^ref-55558

---
自己相関係数を — location: [861](kindle://book?action=open&asin=B00KNRL068&location=861) ^ref-4119

---
自己相関係数の値をプロットした図を コレログラム — location: [867](kindle://book?action=open&asin=B00KNRL068&location=867) ^ref-42472

---
自己相関係数 — location: [896](kindle://book?action=open&asin=B00KNRL068&location=896) ^ref-29214

---
自己相関係数、偏自己相関係数を確認する方法が一般的 — location: [915](kindle://book?action=open&asin=B00KNRL068&location=915) ^ref-25350

---
データが同一の分布に従う」という条件をもとに、時系列データ分析に適した前提条件を考えることになります。 — location: [992](kindle://book?action=open&asin=B00KNRL068&location=992) ^ref-28446

---
Cov( Rt, Rt－h)＝ h 自己共分散がラグ h のみに依存 — location: [999](kindle://book?action=open&asin=B00KNRL068&location=999) ^ref-51073

---
切片μと自己回帰係数φ 1 が — location: [1080](kindle://book?action=open&asin=B00KNRL068&location=1080) ^ref-4208

---
平均、分散、自己共分散、自己相関係数はそれぞれ、 と計算できます（ 注8）。ただし、分散で用いているσ 2 は、イノベーションの分散です。 — location: [1111](kindle://book?action=open&asin=B00KNRL068&location=1111) ^ref-34465

---
rt ＝μ＋φ 1 rt－1 ＋ et を考えますが、実際の分析ではモデルのパラメタである、 1．自己回帰係数φ 1 2．切片μ 3．イノベーションの分散σ 2 — location: [1119](kindle://book?action=open&asin=B00KNRL068&location=1119) ^ref-62562

---
はじめに対象のデータが単位根を有しているか否かを確認する必要があります。 — location: [1218](kindle://book?action=open&asin=B00KNRL068&location=1218) ^ref-30884

---
Dickey-Fuller検定 — location: [1240](kindle://book?action=open&asin=B00KNRL068&location=1240) ^ref-64396

---
時系列データの平均、分散、自己相関係数などの計算をはじめとした時系列データの分析をする際には、事前に単位根検定を行い、分析対象の時系列データが定常性を有するか確かめることが必要です。 — location: [1266](kindle://book?action=open&asin=B00KNRL068&location=1266) ^ref-22584

---
帰無仮説「標準化残差はskew normal分布に従っている」は棄却できないということを意味しています。 — location: [1611](kindle://book?action=open&asin=B00KNRL068&location=1611) ^ref-23490

棄却できないから判断するは違うのでは？

---
ARCHモデルやGARCHモデルを当てはめた時は、係数の有意性だけでなく、推定した標準化残差が標準正規分布に従っているか否か、QQプロットやShapiro-Wilk検定を用いて調べましょう。 ◉　もし推定した標準化残差が標準正規分布に従っていないときは、他の分布を仮定してモデルを当てはめ直すとよいでしょう。 ◉　正規分布以外の分布の適合度を、統計的仮説検定を用いて調べるときは、 — location: [1618](kindle://book?action=open&asin=B00KNRL068&location=1618) ^ref-25097

---
検定を用いるとよいでしょう。 — location: [1622](kindle://book?action=open&asin=B00KNRL068&location=1622) ^ref-35843

---
その時は3-3や4-1で出てきたAICのような情報量規準を使うとよいでしょう。情報量規準はモデルの当てはめを比較するための値で、値が小さいほどよいモデルということを示しています。本章で使った関数garchFitは自動的にAIC、BIC、SIC、HQICの4つ情報量規準を計算してくれます。 — location: [1625](kindle://book?action=open&asin=B00KNRL068&location=1625) ^ref-11882

---
モデル自身の構造に手を入れることで標準化残差の歪みや偏りを解消する方法も考えられます。たとえば、GJRモデルやEGARCHモデルなどが開発されています。 — location: [1632](kindle://book?action=open&asin=B00KNRL068&location=1632) ^ref-12343

---
このような投資リスク（一般には 市場リスク と呼ばれます）を管理するフレームワークの1つに VaR（Value at Risk）によるリスク計量法があります。 — location: [1650](kindle://book?action=open&asin=B00KNRL068&location=1650) ^ref-3516

---
累積収益率 — location: [1742](kindle://book?action=open&asin=B00KNRL068&location=1742) ^ref-35963

---
この例のように実は 収益率の相関関係は必ずしも価格の相関関係には反映されません。 — location: [1747](kindle://book?action=open&asin=B00KNRL068&location=1747) ^ref-40990

---
この系列yindexにADF検定をかけると次のように「単位根がある」という帰無仮説を棄却できません。 — location: [1772](kindle://book?action=open&asin=B00KNRL068&location=1772) ^ref-31195

---
そもそも乱数で作ったyindexと日本水産の累積収益率は全くの無関係です。しかし、線形モデルを当てはめるとなぜか意味のある回帰の結果が返ってき — location: [1822](kindle://book?action=open&asin=B00KNRL068&location=1822) ^ref-19671

---
ました。このような問題はなぜ起きたのでしょうか。その原因は「日本水産の累積収益率の系列、yindexともに単位根過程である」ということにあります。 — location: [1823](kindle://book?action=open&asin=B00KNRL068&location=1823) ^ref-47951

---
平均回帰性 という性質を持ちます。平均回帰性とは、時間経過とともに| Ct ＋ sDt |が非常に大きくなっても、もっと時間が経過すれば Ct ＋ sDt の値はその平均である E( Ct ＋ sDt)という定数の近くに戻ってくるという性質です。ですから、共和分関係にある2つの株式 Ct、 Dt と共和分ベクトルを見つけ出せたならば、日々| Ct ＋ sDt |の値を計算しつつその値が大きく外れたところで適当なポジションをとり、戻ってきた段階でポジションを精算すれば収益を上げることが可能になります。このような投資戦略は一般的に ペアトレーディング と呼ばれています。 — location: [1871](kindle://book?action=open&asin=B00KNRL068&location=1871) ^ref-27215

---
ふくおかFGの累積収益率＝α＋β×肥後銀行の累積収益率＋誤差項 — location: [1894](kindle://book?action=open&asin=B00KNRL068&location=1894) ^ref-38872

---
通常の場合、個体間の距離の測定は、いわゆる点と点の間の距離（ユークリッド距離）の定義をそのまま用いて行います。 — location: [1951](kindle://book?action=open&asin=B00KNRL068&location=1951) ^ref-8611

---
基準化 — location: [1956](kindle://book?action=open&asin=B00KNRL068&location=1956) ^ref-63361

標準化

---
日次収益率）に対してクラスタリングを実行した結果の図です。このトーナメント表のような図のことをデンドログラム — location: [1964](kindle://book?action=open&asin=B00KNRL068&location=1964) ^ref-2933

---
KDDIは当該期間に株式分割を行ったため図から除外しています。デンドログラムでは — location: [1966](kindle://book?action=open&asin=B00KNRL068&location=1966) ^ref-43708

---
今度は距離として特殊な定義を組み込んでみましょう。具体的には、累積収益率が単位根過程である2つの系列に対して線形モデルを当てはめて残差系列を取り出し、その残差系列に対してADF検定をかけた時のp値を距離として使います。 — location: [2022](kindle://book?action=open&asin=B00KNRL068&location=2022) ^ref-59321

---
